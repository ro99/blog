---
layout: post
title: "TikZ Test"
date: 2025-12-14 13:00:00 -0400
---

This is a test of TikZ rendering in the browser.

{% tikz fermat-refraction-circle%}
\begin{tikzpicture}[scale=1.5,
    dot/.style={fill, circle, inner sep=1.5pt},
    label style/.style={font=\itshape\large}, % Italic, large font for labels
    line style/.style={thin}
]

% --- 1. Define Coordinates and Dimensions ---

% Radius
\def\R{4} 

% Center of the circle (Point D)
\coordinate (D) at (0, 0); 

% Diameter Endpoints (A and P)
\coordinate (A) at (-\R, 0); 
\coordinate (P) at (\R, 0);

% Point C (Source) - Left side, based on x_offset = -130/150 * 4 = -3.46
\def\Cx{-3.466}
\pgfmathsetmacro\Cy{sqrt(\R*\R - \Cx*\Cx)} % Calculate y based on circle equation
\coordinate (C) at (\Cx, \Cy);

% Point F (Projection of C)
\coordinate (F) at (\Cx, 0);

% Point O (Arbitrary point for proof) - Left side
\coordinate (O) at (-1.333, 0); % Approx -50/150 * 4

% Point H (Projection of I) - Right side, based on x_offset = 50/150 * 4 = 1.333
\def\Hx{1.333}
\coordinate (H) at (\Hx, 0);

% Point I (Refracted Point) - Must align vertically with H
\pgfmathsetmacro\Iy{sqrt(\R*\R - \Hx*\Hx)}
\coordinate (I) at (\Hx, -\Iy);

% Line M (External Reference) - Length = DH = 1.333
\coordinate (Mstart) at (2.5, 3.5);
\pgfmathsetmacro\MendX{2.5 + \Hx}
\coordinate (Mend) at (\MendX, 3.5);

% --- 2. Drawing Geometric Elements ---

% Circle and Diameter
\draw[line style] (0,0) circle (\R);
\draw[line style] (A) -- (P);

% Vertical Projections (CF and IH)
\draw[line style, dashed] (C) -- (F);
\draw[line style, dashed] (I) -- (H);

% Refraction Rays (Main Path: C-D-I)
\draw[line style, very thick] (C) -- (D);
\draw[line style, very thick] (D) -- (I);

% Proof Lines (Virtual Path: C-O and O-I)
\draw[line style] (C) -- (O);
\draw[line style] (O) -- (I);

% External Line M
\draw[line style] (Mstart) -- (Mend);

% --- 3. Placing Labels and Points ---

% Points on the diagram (small dots)
\node[dot] at (C) {};
\node[dot] at (D) {};
\node[dot] at (I) {};

% Title
\node[font=\large] at (0, 4.5) {Fig. 108.};

% C and I (on circle)
\node[label style, anchor=south east] at (C) {C};
\node[label style, anchor=north west] at (I) {I};

% Diameter Endpoints
\node[label style, anchor=east] at (A) {A};
\node[label style, anchor=west] at (P) {P};

% Internal Diameter Points (Adjusted to avoid crossing lines)
\def\loffset{0.25} % Vertical offset for labels

% F (Projection of C) - Below line
\node[label style, anchor=north] at ($(F) + (0,-\loffset)$) {F};

% O (Arbitrary point) - Below line (as requested)
\node[label style, anchor=north] at ($(O) + (0,-\loffset)$) {O};

% D (Center) - Above line (as requested)
\node[label style, anchor=south] at ($(D) + (0,\loffset)$) {D};

% H (Projection of I) - Above line
\node[label style, anchor=south] at ($(H) + (0,\loffset)$) {H};

% Line M Label
\node[label style, anchor=south] at ($(Mstart)!0.5!(Mend) + (0,0.15)$) {M};

\end{tikzpicture}
{% endtikz %}
